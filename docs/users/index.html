<!DOCTYPE html>
<html>
    <head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app43.us.archive.org';v.server_ms=291;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="/static/js/wbhack.js?v=1522452177.0" charset="utf-8"></script>

<script type="text/javascript">
__wbhack.init('https://web.archive.org/web');
</script>
<link rel="stylesheet" type="text/css" href="/static/css/banner-styles.css?v=1522452177.0" />
<link rel="stylesheet" type="text/css" href="/static/css/iconochive.css?v=1522452177.0" />

<!-- End Wayback Rewrite JS Include -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Users and groups</title>

        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/github.css">

        <link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
        <link rel="icon" type="image/png" href="/favicon/favicon-16x16.png" sizes="16x16">
        <link rel="shortcut icon" href="/favicon/favicon.ico">

        <!-- fonts.com -->
        <script type="text/javascript">
            // first, create the object that contains
            // configuration variables
            MTIConfig = {};

            // next, add a variable that will control
            // whether or not FOUT will be prevented
            MTIConfig.EnableCustomFOUTHandler = false // true = prevent FOUT
        </script>
        <script type="text/javascript" src="//fast.fonts.net/jsapi/5cf5064a-b80d-4123-82d3-5c7a863edb22.js"></script>
        <!-- jquery -->
        <script type="text/javascript" src="/js/jquery/jquery-2.2.3.min.js"></script>
        <!-- waypoints -->
        <script type="text/javascript" src="/js/waypoints/jquery.waypoints.min.js"></script>
        <script type="text/javascript" src="/js/waypoints/sticky.min.js"></script>
        <!-- horizon.io -->
        <script type="text/javascript" src="/js/site.js"></script>
    </head>
    <body>
        

        <nav class="site-nav">
            <div class="site-container">
                <a class="logo" href="/"><img src="/images/horizon-logo.png" alt="Horizon"></a>
                <ul class="navbar-links">
                    <li class="menu-trigger">
                        <svg height="24px" version="1.1" viewbox="0 0 24 24" width="24px" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><desc/><defs/><g fill="none" fill-rule="evenodd" id="miu" stroke="none" stroke-width="1"><g id="Artboard-1" transform="translate(-395.000000, -479.000000)"><g id="slice" transform="translate(215.000000, 119.000000)"/><path d="M396.500836,485 C396.224232,485 396,485.214035 396,485.504684 L396,486.495316 C396,486.774045 396.217742,487 396.500836,487 L417.499164,487 C417.775768,487 418,486.785965 418,486.495316 L418,485.504684 C418,485.225955 417.782258,485 417.499164,485 L396.500836,485 Z M396.500836,490 C396.224232,490 396,490.214035 396,490.504684 L396,491.495316 C396,491.774045 396.217742,492 396.500836,492 L417.499164,492 C417.775768,492 418,491.785965 418,491.495316 L418,490.504684 C418,490.225955 417.782258,490 417.499164,490 L396.500836,490 Z M396.500836,495 C396.224232,495 396,495.214035 396,495.504684 L396,496.495316 C396,496.774045 396.217742,497 396.500836,497 L417.499164,497 C417.775768,497 418,496.785965 418,496.495316 L418,495.504684 C418,495.225955 417.782258,495 417.499164,495 L396.500836,495 Z" id="editor-list-view-hambuger-menu-glyph"/></g></g></svg>

                    </li>
                    <li>
                        <a href="/cloud">Horizon Cloud</a>
                    </li>
                    <li>
                        <a href="/install">Install</a>
                    </li>
                    <li>
                        <a href="/faq">FAQ</a>
                    </li>
                    <li class="active">
                        <a href="/docs">Docs</a>
                    </li>
                    <li>
                        <a href="/community">Community</a>
                    </li>
                    <li>
                        <a href="/blog">Blog</a>
                    </li>
                </ul>
            </div>
        </nav>
        <section class="site-content">
            <section class="documentation">
    <div class="site-container">
        <nav class="docs-nav">
            
            <section>
                <h1>Horizon basics</h1>
                <ul>
                    
                        <li>
                            <!-- index | users -->
                            <a href="/docs">Overview</a>
                        </li>
                    
                        <li>
                            <!-- install | users -->
                            <a href="/install">Install Horizon</a>
                        </li>
                    
                        <li>
                            <!-- faq | users -->
                            <a href="/faq">FAQ</a>
                        </li>
                    
                        <li>
                            <!-- getting-started | users -->
                            <a href="/docs/getting-started">Getting started</a>
                        </li>
                    
                </ul>
            </section>
            
            <section>
                <h1>Building Horizon apps</h1>
                <ul>
                    
                        <li>
                            <!-- cli | users -->
                            <a href="/docs/cli">Horizon CLI</a>
                        </li>
                    
                        <li>
                            <!-- auth | users -->
                            <a href="/docs/auth">Authentication</a>
                        </li>
                    
                        <li class="active">
                            <!-- users | users -->
                            <a href="/docs/users">Users and groups</a>
                        </li>
                    
                        <li>
                            <!-- permissions | users -->
                            <a href="/docs/permissions">Permissions</a>
                        </li>
                    
                        <li>
                            <!-- api-collection | users -->
                            <a href="/api/collection">Collection API</a>
                        </li>
                    
                        <li>
                            <!-- api-horizon | users -->
                            <a href="/api/horizon">Horizon API</a>
                        </li>
                    
                </ul>
            </section>
            
            <section>
                <h1>Resources</h1>
                <ul>
                    
                        <li>
                            <!-- config | users -->
                            <a href="/docs/configuration">Configuring Horizon</a>
                        </li>
                    
                        <li>
                            <!-- embed | users -->
                            <a href="/docs/embed">Embedding Horizon</a>
                        </li>
                    
                        <li>
                            <!-- examples | users -->
                            <a href="/docs/examples">Example apps</a>
                        </li>
                    
                        <li>
                            <!-- limitations | users -->
                            <a href="/docs/limitations">Limitations</a>
                        </li>
                    
                        <li>
                            <!-- docker | users -->
                            <a href="/docs/docker">Horizon with Docker</a>
                        </li>
                    
                </ul>
            </section>
            
        </nav>
        <section class="docs-article document">
            
            <h1 class="title">Users and groups</h1>
            <p>When you use Horizon’s <a href="/docs/auth">Authentication system</a>, user information is stored in a special Horizon <a href="/api/collection">collection</a>, <code class="highlighter-rouge">users</code>. You can use the <code class="highlighter-rouge">users</code> collection the same way you use any other collection, or through a special shortcut accessor:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">horizon</span> <span class="o">=</span> <span class="nx">Horizon</span><span class="p">();</span>

<span class="c1">// Access as a standard collection</span>
<span class="kr">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="nx">horizon</span><span class="p">(</span><span class="s1">'users'</span><span class="p">);</span>

<span class="c1">// Access through the shortcut</span>
<span class="kr">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="nx">horizon</span><span class="p">.</span><span class="nx">users</span><span class="p">;</span>
</code></pre>
</div>

<p>When a new user is created, they’re automatically assigned to two user groups, <code class="highlighter-rouge">default</code> and <code class="highlighter-rouge">authenticated</code>. User groups are used to assign permissions; for more information about the way the permission system works, read <a href="/docs/permissions">Permissions and schema enforcement</a>. The document created for each new user contains their unique ID and a list of groups they belong to:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"D6B8E9D0-CD96-4C01-BFD6-2AF43141F2A7"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w"> </span><span class="s2">"authenticated"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>If you wanted to add data to this user record, you would <code class="highlighter-rouge">find</code> the record, make the change, and then <code class="highlighter-rouge">replace</code> it in the collection.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">horizon</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"D6B8E9D0-CD96-4C01-BFD6-2AF43141F2A7"</span><span class="p">).</span><span class="nx">fetch</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// add a 'name' key</span>
        <span class="nx">user</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">"Bob"</span><span class="p">;</span>
        <span class="nx">horizon</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre>
</div>

<p>To add a user to a group, or remove them from a group, modify the <code class="highlighter-rouge">groups</code> field.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">horizon</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"D6B8E9D0-CD96-4C01-BFD6-2AF43141F2A7"</span><span class="p">).</span><span class="nx">fetch</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// add to the 'admin' group</span>
        <span class="nx">user</span><span class="p">.</span><span class="nx">groups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'admin'</span><span class="p">);</span>
        <span class="nx">horizon</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre>
</div>

<p><strong>A Horizon application allows <em>no</em> access to collections by default, even for authenticated users!</strong> For more information, read the documentation on <a href="/docs/permissions">permissions</a>.</p>

<h2 id="accessing-session-data">Accessing session data</h2>

<p>You can check whether a user is currently authenticated using the <a href="/api/horizon/#hasauthtoken">Horizon.hasAuthToken</a> method, and access their information with <a href="/api/horizon/#currentuser">Horizon.currentUser</a>.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">Horizon</span><span class="p">.</span><span class="nx">hasAuthToken</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Horizon</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">());</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"No user info available"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">currentUser</code> is a user object as described in <a href="/docs/users">Users and groups</a>, or an empty object if the user is unauthenticated.</p>

<h2 id="see-also">See also</h2>

<ul>
  <li><a href="/docs/permissions">Permissions and schema enforcement</a></li>
  <li><a href="/docs/auth">Horizon authentication</a></li>
</ul>

        </section>
    </div>
</section>

        </section>
        <footer>
            <div class="site-container">
                <section class="about">
                    <h1 class="hz">Horizon is a <strong>realtime, open-source backend</strong> for JavaScript apps.</h1>
                    <a href="https://web.archive.org/web/20171009000644/https://github.com/rethinkdb/horizon" class="button primary-button">Star the project on GitHub</a>
                </section>
                <section class="footer-right">
                    <nav class="site-map">
                        <section>
                            <h1>Getting started</h1>
                            <ul>
                                <li><a href="/faq">FAQ</a></li>
                                <li><a href="/install">Install</a></li>
                                <li><a href="/docs/getting-started">Getting started</a></li>
                            </ul>
                        </section>
                        <section>
                            <h1>Documentation</h1>
                            <ul>
                                <li><a href="/api/collection">Collection API</li>
                                <li><a href="/api/horizon">Horizon API</a></li>
                                <li><a href="/docs/cli">Horizon CLI</a></li>
                            </ul>
                        </section>
                        <section>
                            <h1>Get involved</h1>
                            <ul>
                                <li><a href="https://web.archive.org/web/20171009000644/http://slack.rethinkdb.com/">Join us on Slack #horizon</a></li>
                                <li><a href="https://web.archive.org/web/20171009000644/https://discuss.horizon.io/">Discuss on Discourse</a></li>
                                <li><a href="https://web.archive.org/web/20171009000644/https://rethinkdb.com/community/shirts-for-stories/">Shirts for Stories</a></li>
                            </ul>
                        </section>
                    </nav>
                    <h1 class="github">Built by the <a href="https://web.archive.org/web/20171009000644/https://rethinkdb.com/">RethinkDB team</a> and an amazing community.</h2>
                </section>
            </div>
        </footer>
        <script type="text/javascript">
          var _gauges = _gauges || [];
          (function() {
            var t   = document.createElement('script');
            t.type  = 'text/javascript';
            t.async = true;
            t.id    = 'gauges-tracker';
            t.setAttribute('data-site-id', '56fb1a594b2ffa61f100a699');
            t.setAttribute('data-track-path', 'https://web.archive.org/web/20171009000644/https://track.gaug.es/track.gif');
            t.src = 'https://web.archive.org/web/20171009000644/https://d36ee2fcip1434.cloudfront.net/track.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(t, s);
          })();
        </script>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//web.archive.org/web/20171009000644/http://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-9922584-3', 'auto');
          ga('send', 'pageview');

      </script>
    </body>
</html>
<!--
     FILE ARCHIVED ON 00:06:44 Oct 09, 2017 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 18:50:54 Apr 21, 2018.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  LoadShardBlock: 110.672 (3)
  esindex: 0.006
  captures_list: 130.172
  CDXLines.iter: 12.328 (3)
  PetaboxLoader3.datanode: 59.983 (4)
  exclusion.robots: 0.194
  exclusion.robots.policy: 0.169
  RedisCDXSource: 1.991
  PetaboxLoader3.resolve: 169.672 (2)
  load_resource: 133.697
-->