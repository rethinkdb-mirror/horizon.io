<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Configuration files</title>

        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/github.css">

        <link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
        <link rel="icon" type="image/png" href="/favicon/favicon-16x16.png" sizes="16x16">
        <link rel="shortcut icon" href="/favicon/favicon.ico">

        <!-- fonts.com -->
        <script type="text/javascript">
            // first, create the object that contains
            // configuration variables
            MTIConfig = {};

            // next, add a variable that will control
            // whether or not FOUT will be prevented
            MTIConfig.EnableCustomFOUTHandler = false // true = prevent FOUT
        </script>
        <script type="text/javascript" src="//fast.fonts.net/jsapi/5cf5064a-b80d-4123-82d3-5c7a863edb22.js"></script>
        <!-- jquery -->
        <script type="text/javascript" src="/js/jquery/jquery-2.2.3.min.js"></script>
        <!-- waypoints -->
        <script type="text/javascript" src="/js/waypoints/jquery.waypoints.min.js"></script>
        <script type="text/javascript" src="/js/waypoints/sticky.min.js"></script>
        <!-- horizon.io -->
        <script type="text/javascript" src="/js/site.js"></script>
    </head>
    <body>
        

        <nav class="site-nav">
            <div class="site-container">
                <a class="logo" href="/"><img src="/images/horizon-logo.png" alt="Horizon"></a>
                <ul class="navbar-links">
                    <li class="menu-trigger">
                        <svg height="24px" version="1.1" viewBox="0 0 24 24" width="24px" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><desc/><defs/><g fill="none" fill-rule="evenodd" id="miu" stroke="none" stroke-width="1"><g id="Artboard-1" transform="translate(-395.000000, -479.000000)"><g id="slice" transform="translate(215.000000, 119.000000)"/><path d="M396.500836,485 C396.224232,485 396,485.214035 396,485.504684 L396,486.495316 C396,486.774045 396.217742,487 396.500836,487 L417.499164,487 C417.775768,487 418,486.785965 418,486.495316 L418,485.504684 C418,485.225955 417.782258,485 417.499164,485 L396.500836,485 Z M396.500836,490 C396.224232,490 396,490.214035 396,490.504684 L396,491.495316 C396,491.774045 396.217742,492 396.500836,492 L417.499164,492 C417.775768,492 418,491.785965 418,491.495316 L418,490.504684 C418,490.225955 417.782258,490 417.499164,490 L396.500836,490 Z M396.500836,495 C396.224232,495 396,495.214035 396,495.504684 L396,496.495316 C396,496.774045 396.217742,497 396.500836,497 L417.499164,497 C417.775768,497 418,496.785965 418,496.495316 L418,495.504684 C418,495.225955 417.782258,495 417.499164,495 L396.500836,495 Z" id="editor-list-view-hambuger-menu-glyph"/></g></g></svg>

                    </li>
                    <li>
                        <a href="/cloud">Horizon Cloud</a>
                    </li>
                    <li>
                        <a href="/install">Install</a>
                    </li>
                    <li>
                        <a href="/faq">FAQ</a>
                    </li>
                    <li class="active">
                        <a href="/docs">Docs</a>
                    </li>
                    <li>
                        <a href="/community">Community</a>
                    </li>
                    <li>
                        <a href="/blog">Blog</a>
                    </li>
                </ul>
            </div>
        </nav>
        <section class="site-content">
            <section class="documentation">
    <div class="site-container">
        <nav class="docs-nav">
            
            <section>
                <h1>Horizon basics</h1>
                <ul>
                    
                        <li>
                            <!-- index | configuration -->
                            <a href="/docs">Overview</a>
                        </li>
                    
                        <li>
                            <!-- install | configuration -->
                            <a href="/install">Install Horizon</a>
                        </li>
                    
                        <li>
                            <!-- faq | configuration -->
                            <a href="/faq">FAQ</a>
                        </li>
                    
                        <li>
                            <!-- getting-started | configuration -->
                            <a href="/docs/getting-started">Getting started</a>
                        </li>
                    
                </ul>
            </section>
            
            <section>
                <h1>Building Horizon apps</h1>
                <ul>
                    
                        <li>
                            <!-- cli | configuration -->
                            <a href="/docs/cli">Horizon CLI</a>
                        </li>
                    
                        <li>
                            <!-- auth | configuration -->
                            <a href="/docs/auth">Authentication</a>
                        </li>
                    
                        <li>
                            <!-- users | configuration -->
                            <a href="/docs/users">Users and groups</a>
                        </li>
                    
                        <li>
                            <!-- permissions | configuration -->
                            <a href="/docs/permissions">Permissions</a>
                        </li>
                    
                        <li>
                            <!-- api-collection | configuration -->
                            <a href="/api/collection">Collection API</a>
                        </li>
                    
                        <li>
                            <!-- api-horizon | configuration -->
                            <a href="/api/horizon">Horizon API</a>
                        </li>
                    
                </ul>
            </section>
            
            <section>
                <h1>Resources</h1>
                <ul>
                    
                        <li>
                            <!-- config | configuration -->
                            <a href="/docs/configuration">Configuring Horizon</a>
                        </li>
                    
                        <li>
                            <!-- embed | configuration -->
                            <a href="/docs/embed">Embedding Horizon</a>
                        </li>
                    
                        <li>
                            <!-- examples | configuration -->
                            <a href="/docs/examples">Example apps</a>
                        </li>
                    
                        <li>
                            <!-- limitations | configuration -->
                            <a href="/docs/limitations">Limitations</a>
                        </li>
                    
                        <li>
                            <!-- docker | configuration -->
                            <a href="/docs/docker">Horizon with Docker</a>
                        </li>
                    
                </ul>
            </section>
            
        </nav>
        <section class="docs-article document">
            
            <h1 class="title">Configuration files</h1>
            <p>Options for Horizon apps are set by two <a href="https://github.com/toml-lang/toml">TOML</a> files in the appâ€™s root directory:</p>

<ul>
  <li><code class="highlighter-rouge">.hz/config.toml</code>: most configuration options</li>
  <li><code class="highlighter-rouge">.hz/secrets.toml</code>: authentication/token secrets</li>
</ul>

<p>(A third configuration file, <code class="highlighter-rouge">.hz/schema.toml</code>, is optionally used for the database schema.) The example configuration files installed by <code class="highlighter-rouge">hz init</code> are fully commented; this documentation is taken from there.</p>

<p>Note that any of these options can be overridden with environment variables of the form <code class="highlighter-rouge">HZ_&lt;OPTION&gt;</code>, where <code class="highlighter-rouge">&lt;OPTION&gt;</code> is the name of the option listed in this file. To override the <code class="highlighter-rouge">serve_static</code> setting, for instance, you could use:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">HZ_SERVE_STATIC</span><span class="o">=</span><span class="s2">"./static"</span>
</code></pre>
</div>

<p>This would override the setting in the <code class="highlighter-rouge">config.toml</code> file. However, if the <code class="highlighter-rouge">--serve-static</code> option were passed to the <code class="highlighter-rouge">hz serve</code> command, that would take priority over both the configuration file and any environment variables: configuration precedence is command line flags first, environment variables next, configuration file last.</p>

<p>Options are shown with their default values.</p>

<h2 id="networking-options-configtoml">Networking options (config.toml)</h2>

<ul>
  <li><code class="highlighter-rouge">bind</code> controls which local interfaces will be listened on.</li>
  <li><code class="highlighter-rouge">port</code> controls which port will be listened on.</li>
  <li><code class="highlighter-rouge">secure</code>: disable HTTPS and use HTTP instead when set to <code class="highlighter-rouge">false</code>.</li>
  <li><code class="highlighter-rouge">key_file</code>: HTTPS key file.</li>
  <li><code class="highlighter-rouge">cert_file</code>: HTTPS certificate file.</li>
</ul>

<div class="language-toml highlighter-rouge"><pre class="highlight"><code><span class="py">bind</span> <span class="p">=</span> <span class="p">[</span> <span class="s">"localhost"</span> <span class="p">]</span>
<span class="py">port</span> <span class="p">=</span> <span class="mi">8181</span>
<span class="py">secure</span> <span class="p">=</span> <span class="kc">true</span>
<span class="py">key_file</span> <span class="p">=</span> <span class="s">"horizon-key.pem"</span>
<span class="py">cert_file</span> <span class="p">=</span> <span class="s">"horizon-cert.pem"</span>
<span class="py">access_control_allow_origin</span> <span class="p">=</span> <span class="s">""</span>
</code></pre>
</div>

<h2 id="app-options-configtoml">App options (config.toml)</h2>

<ul>
  <li><code class="highlighter-rouge">project_name</code>: sets the name of the RethinkDB database used to store the application state.</li>
  <li><code class="highlighter-rouge">serve_static</code>: serve static files from the given directory.</li>
  <li><code class="highlighter-rouge">debug</code>: enable debug logging statements.</li>
</ul>

<div class="language-toml highlighter-rouge"><pre class="highlight"><code><span class="py">project_name</span> <span class="p">=</span> <span class="s">"horizon"</span>
<span class="py">serve_static</span> <span class="p">=</span> <span class="s">"dist"</span>
<span class="py">debug</span> <span class="p">=</span> <span class="kc">false</span>
</code></pre>
</div>

<h2 id="rdbopts">RethinkDB options (config.toml)</h2>

<ul>
  <li><code class="highlighter-rouge">connect</code>: connect to an existing RethinkDB instance. This may be a host:port combination (e.g., <code class="highlighter-rouge">rethinkdb.example.com:28015</code>) or a <code class="highlighter-rouge">rethinkdb://[username:pasword@host:port[/database]</code> URI:
    <ul>
      <li><code class="highlighter-rouge">rethinkdb://rethinkdb.example.com:28015</code></li>
      <li><code class="highlighter-rouge">rethinkdb://dbuser:badpassword@rethinkdb.example.com:28015/horizondb</code></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">start_rethinkdb</code>: run an internal RethinkDB instance for Horizon.</li>
  <li><code class="highlighter-rouge">auto_create_collection</code>: creates a collection with its corresponding RethinkDB table when one is accessed but does not exist.</li>
  <li><code class="highlighter-rouge">auto_create_index</code>: creates an index when one is needed but does not exist.</li>
  <li><code class="highlighter-rouge">rdb_timeout</code>: timeout to make the connection to the RethinkDB cluster, in seconds.</li>
</ul>

<p>RethinkDB connection information may alternatively be specified with individual options:</p>

<ul>
  <li><code class="highlighter-rouge">rdb_host</code>: hostname</li>
  <li><code class="highlighter-rouge">rdb_port</code>: port</li>
  <li><code class="highlighter-rouge">rdb_user</code>: username for RethinkDB authentication</li>
  <li><code class="highlighter-rouge">rdb_password</code>: password for RethinkDB authentication</li>
</ul>

<div class="language-toml highlighter-rouge"><pre class="highlight"><code><span class="py">connect</span> <span class="p">=</span> <span class="s">"localhost:28015"</span>
<span class="py">start_rethinkdb</span> <span class="p">=</span> <span class="kc">false</span>
<span class="py">auto_create_collection</span> <span class="p">=</span> <span class="kc">false</span>
<span class="py">auto_create_index</span> <span class="p">=</span> <span class="kc">false</span>
<span class="py">rdb_timeout</span> <span class="p">=</span> <span class="mi">20</span>
</code></pre>
</div>

<p><strong>Warning:</strong> Tables and indexes are not lightweight objects, and allowing ad hoc creation could potentially expose your service to denial-of-service attacks. The <code class="highlighter-rouge">auto_create_*</code> options should not be enabled on a publicly-accessible service.</p>

<h2 id="authentication-options-configtoml">Authentication options (config.toml)</h2>

<ul>
  <li><code class="highlighter-rouge">allow_anonymous</code>: issues new accounts to users without an auth provider.</li>
  <li><code class="highlighter-rouge">allow_unauthenticated</code>: allows connections that are not tied to a user id.</li>
  <li><code class="highlighter-rouge">auth_redirect</code>: specifies where users will be redirected to after login.</li>
  <li><code class="highlighter-rouge">access_control_allow_origin</code>: specifies a host that can access auth settings in production (i.e., set the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Origin">Access-Control-Allow-Origin HTTP header</a>). <code class="highlighter-rouge">"*"</code> may be specified as a wildcard.</li>
</ul>

<div class="language-toml highlighter-rouge"><pre class="highlight"><code><span class="py">allow_anonymous</span> <span class="p">=</span> <span class="kc">false</span>
<span class="py">allow_unauthenticated</span> <span class="p">=</span> <span class="kc">false</span>
<span class="py">auth_redirect</span> <span class="p">=</span> <span class="s">"/"</span>
<span class="py">access_control_allow_origin</span> <span class="p">=</span> <span class="s">""</span>
</code></pre>
</div>

<h2 id="secretstoml">secrets.toml</h2>

<p>Horizon supports OAuth authentication for Facebook, Google, Twitter, Github and Twitch, as well as Auth0 single sign-on. Each enabled service appears in its own TOML table and has two key/value pairs, <code class="highlighter-rouge">id</code> and <code class="highlighter-rouge">secret</code>.</p>

<div class="language-toml highlighter-rouge"><pre class="highlight"><code><span class="nn">[auth.auth0]</span>
<span class="py">host</span> <span class="p">=</span> <span class="s">"0000.00.auth0.com"</span>
<span class="py">id</span> <span class="p">=</span> <span class="s">"0000000000000000000000000"</span>
<span class="py">secret</span> <span class="p">=</span> <span class="s">"00000000000000000000000000000000000000000000000000"</span>
<span class="py">redirect_url</span> <span class="p">=</span> <span class="s">""</span>

<span class="nn">[auth.facebook]</span>
<span class="py">id</span> <span class="p">=</span> <span class="s">"000000000000000"</span>
<span class="py">secret</span> <span class="p">=</span> <span class="s">"00000000000000000000000000000000"</span>

<span class="nn">[auth.google]</span>
<span class="py">id</span> <span class="p">=</span> <span class="s">"00000000000-00000000000000000000000000000000.apps.googleusercontent.com"</span>
<span class="py">secret</span> <span class="p">=</span> <span class="s">"000000000000000000000000"</span>

<span class="nn">[auth.twitter]</span>
<span class="py">id</span> <span class="p">=</span> <span class="s">"0000000000000000000000000"</span>
<span class="py">secret</span> <span class="p">=</span> <span class="s">"00000000000000000000000000000000000000000000000000"</span>

<span class="nn">[auth.github]</span>
<span class="py">id</span> <span class="p">=</span> <span class="s">"00000000000000000000"</span>
<span class="py">secret</span> <span class="p">=</span> <span class="s">"0000000000000000000000000000000000000000"</span>

<span class="nn">[auth.twitch]</span>
<span class="py">id</span> <span class="p">=</span> <span class="s">"0000000000000000000000000000000"</span>
<span class="py">secret</span> <span class="p">=</span> <span class="s">"0000000000000000000000000000000"</span>
</code></pre>
</div>

<p>If the <code class="highlighter-rouge">id</code> and <code class="highlighter-rouge">secret</code> pairs are set for a given service, that service is enabled for authentication.</p>

<p>In addition, the <code class="highlighter-rouge">secrets.toml</code> file contains the <code class="highlighter-rouge">token_secret</code> used for token encryption. When this file is created by <code class="highlighter-rouge">hz init</code>, the <code class="highlighter-rouge">token_secret</code> will be set to a randomly-generated base64 string.</p>

        </section>
    </div>
</section>

        </section>
        <footer>
            <div class="site-container">
                <section class="about">
                    <h1 class="hz">Horizon is a <strong>realtime, open-source backend</strong> for JavaScript apps.</h1>
                    <a href="https://github.com/rethinkdb/horizon" class="button primary-button">Star the project on GitHub</a>
                </section>
                <section class="footer-right">
                    <nav class="site-map">
                        <section>
                            <h1>Getting started</h1>
                            <ul>
                                <li><a href="/faq">FAQ</a></li>
                                <li><a href="/install">Install</a></li>
                                <li><a href="/docs/getting-started">Getting started</a></li>
                            </ul>
                        </section>
                        <section>
                            <h1>Documentation</h1>
                            <ul>
                                <li><a href="/api/collection">Collection API</li>
                                <li><a href="/api/horizon">Horizon API</a></li>
                                <li><a href="/docs/cli">Horizon CLI</a></li>
                            </ul>
                        </section>
                        <section>
                            <h1>Get involved</h1>
                            <ul>
                                <li><a href="http://slack.rethinkdb.com">Join us on Slack #horizon</a></li>
                                <li><a href="https://discuss.horizon.io">Discuss on Discourse</a></li>
                                <li><a href="https://rethinkdb.com/community/shirts-for-stories/">Shirts for Stories</a></li>
                            </ul>
                        </section>
                    </nav>
                    <h1 class="github">Built by the <a href="https://rethinkdb.com">RethinkDB team</a> and an amazing community.</h2>
                </section>
            </div>
        </footer>
        <script type="text/javascript">
          var _gauges = _gauges || [];
          (function() {
            var t   = document.createElement('script');
            t.type  = 'text/javascript';
            t.async = true;
            t.id    = 'gauges-tracker';
            t.setAttribute('data-site-id', '56fb1a594b2ffa61f100a699');
            t.setAttribute('data-track-path', 'https://track.gaug.es/track.gif');
            t.src = 'https://d36ee2fcip1434.cloudfront.net/track.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(t, s);
          })();
        </script>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-9922584-3', 'auto');
          ga('send', 'pageview');

      </script>
    </body>
</html>
